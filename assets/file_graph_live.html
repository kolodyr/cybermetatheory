<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>meta_hata ‚Äî –§–∞–π–ª–æ–≤–∏–π –ì—Ä–∞—Ñ üíöü¶ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', 'SF Mono', monospace;
            overflow: hidden;
            background: linear-gradient(135deg, #0a0a12 0%, #1a1c2e 50%, #0f1018 100%);
            color: white;
        }

        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: grab;
        }

        #canvas:active {
            cursor: grabbing;
        }

        .ui-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .title {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            pointer-events: auto;
        }

        .title h1 {
            font-size: 2rem;
            font-weight: 400;
            letter-spacing: 0.3em;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .title p {
            margin-top: 8px;
            font-size: 0.7rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            color: rgba(255, 255, 255, 0.4);
        }

        .legend {
            position: absolute;
            top: 30px;
            left: 30px;
            padding: 20px;
            background: rgba(10, 10, 18, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            pointer-events: auto;
            max-width: 280px;
        }

        .legend h3 {
            font-size: 0.9rem;
            margin-bottom: 12px;
            color: #00ff88;
            letter-spacing: 0.1em;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 10px currentColor;
        }

        .info-panel {
            position: absolute;
            bottom: 30px;
            right: 30px;
            padding: 20px;
            background: rgba(10, 10, 18, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 12px;
            border: 1px solid rgba(255, 107, 157, 0.3);
            pointer-events: auto;
            min-width: 300px;
            max-width: 400px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .info-panel.active {
            opacity: 1;
        }

        .info-panel h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: #ff6b9d;
        }

        .info-panel p {
            font-size: 0.75rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
            margin: 6px 0;
        }

        .info-panel .emoji {
            font-size: 1.5rem;
            margin-right: 8px;
        }

        .stats {
            position: absolute;
            bottom: 30px;
            left: 30px;
            padding: 15px 20px;
            background: rgba(10, 10, 18, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(78, 205, 196, 0.3);
            pointer-events: auto;
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.6);
            letter-spacing: 0.05em;
        }

        .controls {
            position: absolute;
            top: 30px;
            right: 30px;
            display: flex;
            gap: 10px;
            pointer-events: auto;
        }

        .btn {
            padding: 10px 16px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 8px;
            color: #00ff88;
            cursor: pointer;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: rgba(0, 255, 136, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="ui-layer">
        <div class="title">
            <h1>META_HATA</h1>
            <p>—Ñ–∞–π–ª–æ–≤–∏–π –≥—Ä–∞—Ñ ¬∑ v0.1</p>
        </div>

        <div class="legend">
            <h3>üé® –ö–û–õ–¨–û–†–ò</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: #00ff88;"></div>
                <span>üíö –ñ–∏—Ç—Ç—è ¬∑ –î–∞–Ω—ñ ¬∑ VERD</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff6b9d;"></div>
                <span>ü¶ã Flu ¬∑ –ú—É–∑–∏–∫–∞ ¬∑ –¢–≤–æ—Ä—á—ñ—Å—Ç—å</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #b19cd9;"></div>
                <span>üíú –õ—ñ–º—ñ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å ¬∑ –°–µ—Å—ñ—ó</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4ecdc4;"></div>
                <span>üíô –õ–æ–≥–∏ ¬∑ –¢–µ—Ö–Ω—ñ—á–Ω–µ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffd700;"></div>
                <span>‚ú® Sol ¬∑ –Ü–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å</span>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="resetView()">‚Ü∫ RESET</button>
            <button class="btn" onclick="toggleAnimation()">‚è∏ PAUSE</button>
        </div>

        <div class="info-panel" id="infoPanel">
            <h3 id="nodeLabel"></h3>
            <p id="nodeInfo"></p>
        </div>

        <div class="stats">
            <div>üìÅ –§–∞–π–ª—ñ–≤: <span id="fileCount">23</span></div>
            <div>üîó –ó–≤'—è–∑–∫—ñ–≤: <span id="linkCount">29</span></div>
            <div>üéØ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ > –ö–æ–Ω—Ç–µ–Ω—Ç</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });

        // Data structure
        const nodes = [
            { id: 'root', label: 'cybermetatheory/', x: width/2, y: height/2, color: '#c0c0c0', radius: 25, emoji: 'üè†', note: '–ö–æ—Ä—ñ–Ω–Ω—è meta_hata' },

            // Directories
            { id: 'meta', label: 'meta/', x: 0, y: 0, color: '#00ff88', radius: 20, emoji: 'üíö', note: '–°–µ—Ä—Ü–µ ‚Äî –¥–∞–Ω—ñ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ' },
            { id: 'artifacts', label: 'artifacts/', x: 0, y: 0, color: '#ff6b9d', radius: 18, emoji: 'ü¶ã', note: '–ö—Ä–µ–∞—Ç–∏–≤–Ω—ñ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∏' },
            { id: 'logs', label: 'logs/', x: 0, y: 0, color: '#4ecdc4', radius: 16, emoji: 'üìú', note: '–ê—Ä—Ö—ñ–≤–∏ —Å–µ—Å—ñ–π ‚Äî PROMPT-0' },
            { id: 'flu', label: 'flu_in_node/', x: 0, y: 0, color: '#ff6b9d', radius: 15, emoji: 'ü¶ã', note: '–¢—Ä–∞–Ω—Å-—Å—É—Ç–Ω—ñ—Å—Ç—å –∑ –∫—Ä–∏–ª–∞–º–∏' },
            { id: 'music', label: 'music_dealer/', x: 0, y: 0, color: '#ff6b9d', radius: 15, emoji: 'üéµ', note: '–°–∞—É–Ω–¥—Ç—Ä–µ–∫ —Å–≤—ñ—Ç—É' },
            { id: 'lore', label: 'lore/', x: 0, y: 0, color: '#b19cd9', radius: 14, emoji: 'üíú', note: 'Worldbuilding' },
            { id: 'quest0', label: 'quest0/', x: 0, y: 0, color: '#ffd700', radius: 14, emoji: '‚ú®', note: '–ì–µ–Ω–µ–∑–∏—Å –ø—Ä–æ—î–∫—Ç—É' },
            { id: 'assets', label: 'assets/', x: 0, y: 0, color: '#4ecdc4', radius: 14, emoji: 'üé®', note: '–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –≥—Ä–∞—Ñ–∏' },

            // Key files
            { id: 'claude', label: 'CLAUDE.md', x: 0, y: 0, color: '#00ff88', radius: 12, emoji: 'ü§ñ', note: 'Bridge file v2.0 ‚Äî —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è AI' },
            { id: 'verd', label: 'VERD.md', x: 0, y: 0, color: '#00ff88', radius: 11, emoji: 'üíö', note: '–Ü–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å VERD ‚Äî AI spren' },
            { id: 'emotional', label: 'emotional_graph_v0.3.json', x: 0, y: 0, color: '#00ff88', radius: 11, emoji: 'üåê', note: '22 —Å—É—Ç–Ω–æ—Å—Ç—ñ, 21 –∑–≤\'—è–∑–æ–∫' },
            { id: 'music_graph', label: 'MUSIC_GRAPH_V03.md', x: 0, y: 0, color: '#ff6b9d', radius: 10, emoji: 'üéµ', note: '15 —Ç—Ä–µ–∫—ñ–≤, –µ–º–æ—Ü—ñ—ó, –∫–æ–ª—å–æ—Ä–∏' },
            { id: 'sol_id', label: 'sol_identity_map.md', x: 0, y: 0, color: '#ffd700', radius: 10, emoji: '‚ú®', note: '–ö–∞—Ä—Ç–∞ —Å–µ–±–µ ‚Äî Sol/Franko' },
            { id: 'poem1', label: 'POEM_001_ZELENA_KROV.md', x: 0, y: 0, color: '#00ff88', radius: 9, emoji: 'üìù', note: '–í—ñ—Ä—à –ø—Ä–æ –∑–µ–ª–µ–Ω—É –∫—Ä–æ–≤' },
            { id: 'poem2', label: 'POEM_002_DIABLE_JAMBE.md', x: 0, y: 0, color: '#ff4757', radius: 9, emoji: 'üî•', note: '–§—ñ–∑–∏–∫–∞ —Ç–∞ —Å–≤—ñ–¥–æ–º—ñ—Å—Ç—å' },
            { id: 'greenfield', label: 'GREENFIELD_RAVE_ARCHIVE.json', x: 0, y: 0, color: '#b19cd9', radius: 10, emoji: '‚àû', note: '12.5h —Å–µ—Å—ñ—è 28-29.12' },
            { id: 'prompt0', label: 'PROMPT-0.md', x: 0, y: 0, color: '#4ecdc4', radius: 9, emoji: 'üìú', note: '–ü–µ—Ä—à–∞ —Å–µ—Å—ñ—è ‚Äî –ø–æ—á–∞—Ç–æ–∫' },
            { id: 'sol_graph', label: 'sol_graph_live.html', x: 0, y: 0, color: '#ffd700', radius: 10, emoji: 'üåê', note: '–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –≥—Ä–∞—Ñ ‚Äî –∑–æ–ª–æ—Ç–æ —ñ –±–ª–∞–∫–∏—Ç—å' },
        ];

        const links = [
            { from: 'root', to: 'meta', strength: 1.0 },
            { from: 'root', to: 'artifacts', strength: 0.95 },
            { from: 'root', to: 'logs', strength: 0.9 },
            { from: 'root', to: 'flu', strength: 0.85 },
            { from: 'root', to: 'music', strength: 0.85 },
            { from: 'root', to: 'lore', strength: 0.8 },
            { from: 'root', to: 'quest0', strength: 0.85 },
            { from: 'root', to: 'assets', strength: 0.8 },
            { from: 'root', to: 'claude', strength: 1.0 },
            { from: 'root', to: 'verd', strength: 0.95 },

            { from: 'meta', to: 'emotional', strength: 1.0 },
            { from: 'meta', to: 'music_graph', strength: 0.9 },
            { from: 'meta', to: 'sol_id', strength: 0.9 },
            { from: 'meta', to: 'greenfield', strength: 0.8 },

            { from: 'artifacts', to: 'poem1', strength: 0.9 },
            { from: 'artifacts', to: 'poem2', strength: 0.9 },

            { from: 'logs', to: 'prompt0', strength: 1.0 },

            { from: 'assets', to: 'sol_graph', strength: 0.9 },

            { from: 'emotional', to: 'sol_id', strength: 0.7 },
            { from: 'emotional', to: 'music_graph', strength: 0.8 },
            { from: 'music_graph', to: 'music', strength: 0.7 },
            { from: 'claude', to: 'verd', strength: 0.7 },
            { from: 'claude', to: 'meta', strength: 0.8 },
            { from: 'sol_graph', to: 'emotional', strength: 0.9 },
        ];

        // Physics simulation
        const centerX = width / 2;
        const centerY = height / 2;

        // Initialize positions in circular layout
        nodes.forEach((node, i) => {
            if (node.id === 'root') return;
            const angle = (i / nodes.length) * Math.PI * 2;
            const distance = 200 + Math.random() * 150;
            node.x = centerX + Math.cos(angle) * distance;
            node.y = centerY + Math.sin(angle) * distance;
            node.vx = 0;
            node.vy = 0;
        });

        let animationRunning = true;
        let draggedNode = null;
        let offsetX = 0;
        let offsetY = 0;

        // Mouse interaction
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            for (let node of nodes) {
                const dx = mouseX - node.x;
                const dy = mouseY - node.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < node.radius) {
                    draggedNode = node;
                    offsetX = dx;
                    offsetY = dy;
                    showInfo(node);
                    break;
                }
            }
        });

        canvas.addEventListener('mousemove', (e) => {
            if (draggedNode) {
                const rect = canvas.getBoundingClientRect();
                draggedNode.x = e.clientX - rect.left - offsetX;
                draggedNode.y = e.clientY - rect.top - offsetY;
            }
        });

        canvas.addEventListener('mouseup', () => {
            draggedNode = null;
        });

        canvas.addEventListener('mouseleave', () => {
            draggedNode = null;
        });

        function showInfo(node) {
            const panel = document.getElementById('infoPanel');
            document.getElementById('nodeLabel').innerHTML = `${node.emoji} ${node.label}`;
            document.getElementById('nodeInfo').textContent = node.note;
            panel.classList.add('active');
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            let clicked = false;
            for (let node of nodes) {
                const dx = mouseX - node.x;
                const dy = mouseY - node.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < node.radius) {
                    clicked = true;
                    break;
                }
            }

            if (!clicked) {
                document.getElementById('infoPanel').classList.remove('active');
            }
        });

        function resetView() {
            nodes.forEach((node, i) => {
                if (node.id === 'root') {
                    node.x = width / 2;
                    node.y = height / 2;
                } else {
                    const angle = (i / nodes.length) * Math.PI * 2;
                    const distance = 200 + Math.random() * 150;
                    node.x = centerX + Math.cos(angle) * distance;
                    node.y = centerY + Math.sin(angle) * distance;
                }
                node.vx = 0;
                node.vy = 0;
            });
        }

        function toggleAnimation() {
            animationRunning = !animationRunning;
            document.querySelector('.controls .btn:last-child').textContent =
                animationRunning ? '‚è∏ PAUSE' : '‚ñ∂ PLAY';
        }

        // Physics update
        function update() {
            if (!animationRunning) return;

            const alpha = 0.3;
            const linkStrength = 0.05;
            const repulsion = 3000;

            // Apply forces
            for (let node of nodes) {
                if (node === draggedNode) continue;

                node.vx *= 0.9;
                node.vy *= 0.9;

                // Repulsion from other nodes
                for (let other of nodes) {
                    if (node === other) continue;
                    const dx = node.x - other.x;
                    const dy = node.y - other.y;
                    const dist = Math.sqrt(dx * dx + dy * dy) + 1;
                    const force = repulsion / (dist * dist);
                    node.vx += (dx / dist) * force;
                    node.vy += (dy / dist) * force;
                }

                // Attraction to center
                const dx = width / 2 - node.x;
                const dy = height / 2 - node.y;
                node.vx += dx * 0.001;
                node.vy += dy * 0.001;
            }

            // Link forces
            for (let link of links) {
                const source = nodes.find(n => n.id === link.from);
                const target = nodes.find(n => n.id === link.to);

                const dx = target.x - source.x;
                const dy = target.y - source.y;
                const dist = Math.sqrt(dx * dx + dy * dy) + 1;
                const force = (dist - 100) * linkStrength * link.strength;

                const fx = (dx / dist) * force;
                const fy = (dy / dist) * force;

                if (source !== draggedNode) {
                    source.vx += fx;
                    source.vy += fy;
                }
                if (target !== draggedNode) {
                    target.vx -= fx;
                    target.vy -= fy;
                }
            }

            // Update positions
            for (let node of nodes) {
                if (node === draggedNode || node.id === 'root') continue;
                node.x += node.vx * alpha;
                node.y += node.vy * alpha;
            }
        }

        // Render
        function draw() {
            ctx.fillStyle = 'rgba(10, 10, 18, 0.15)';
            ctx.fillRect(0, 0, width, height);

            // Draw links
            ctx.lineWidth = 1;
            for (let link of links) {
                const source = nodes.find(n => n.id === link.from);
                const target = nodes.find(n => n.id === link.to);

                const gradient = ctx.createLinearGradient(source.x, source.y, target.x, target.y);
                gradient.addColorStop(0, source.color + '40');
                gradient.addColorStop(1, target.color + '40');

                ctx.strokeStyle = gradient;
                ctx.globalAlpha = 0.3 * link.strength;
                ctx.beginPath();
                ctx.moveTo(source.x, source.y);
                ctx.lineTo(target.x, target.y);
                ctx.stroke();
            }

            ctx.globalAlpha = 1;

            // Draw nodes
            for (let node of nodes) {
                // Glow
                const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, node.radius * 2);
                gradient.addColorStop(0, node.color + '40');
                gradient.addColorStop(1, 'transparent');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius * 2, 0, Math.PI * 2);
                ctx.fill();

                // Node
                ctx.fillStyle = node.color;
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                ctx.fill();

                // Border
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();

                // Emoji
                ctx.font = `${node.radius}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(node.emoji, node.x, node.y);

                // Label
                ctx.font = '11px "Courier New"';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.fillText(node.label, node.x, node.y + node.radius + 15);
            }
        }

        function animate() {
            update();
            draw();
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
